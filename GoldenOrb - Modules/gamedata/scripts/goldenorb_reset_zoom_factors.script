----------------------------------------------------------------------------
-- GoldenOrb: Zoom Factor Reset Modifier
----------------------------------------------------------------------------
-- Implemented by Lhan
----------------------------------------------------------------------------

-- Imports

--- Schedule
local LEVEL_CALL = goldenorb_schedule.LEVEL_CALL

--- Weapon
local inject_weapon_hud = goldenorb_weapon.inject_weapon_hud

--- Schedule
local system = goldenorb_schedule.system
local O_WRITE = goldenorb_schedule.O_WRITE

--- Logging
local log = goldenorb_logging.logger(
   "GoldenOrb/Reset Zoom Factors",
   goldenorb_logging.TRACE
)

-- Implementation

--- Zero out the zoom factor components
reset_zoom_factors = system("reset_zoom_factors")
   :runs_after(inject_weapon_hud)
   :with("hud")
   :outputs({
     hud = {
         scope_zoom_factor = O_WRITE,
         gl_zoom_factor = O_WRITE,
         scope_zoom_factor_alt = O_WRITE,
      },
   })
   :via(function()
      return {
         hud = {
            scope_zoom_factor = 0,
            gl_zoom_factor = 0,
            scope_zoom_factor_alt = 0,
         }
      }
   end)
   :during(LEVEL_CALL)

